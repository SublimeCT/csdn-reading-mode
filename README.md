# CSDN æ²‰æµ¸é˜…è¯»æ¨¡å¼
> æœ¬é¡¹ç›®åŸºäº â¤ï¸ [vite-plugin-monkey](https://github.com/lisonge/vite-plugin-monkey) æ„å»º

## ğŸ’ª åŠŸèƒ½
> ç‚¹å‡»å³ä¸‹è§’å°é½¿è½®æ‰“å¼€è„šæœ¬è®¾ç½®å¼¹çª—

- å±è”½æ‰€æœ‰å¹¿å‘Š
- **ä»¥æœ€å¿«æ–¹å¼åŠ è½½è„šæœ¬**, ä¸ä¼šç­‰å¾…é¡µé¢åŠ è½½å®Œæˆåå†æ‰§è¡Œè„šæœ¬
- **ç§»é™¤ä¸æ­£æ–‡æ— å…³çš„ä¸€åˆ‡å…ƒç´ **
- æ­£æ–‡éƒ¨åˆ†å®½åº¦æ”¾å¤§, å¯è‡ªå®šä¹‰æ­£æ–‡å®½åº¦
- ç»•è¿‡é˜…è¯»æ›´å¤šæŒ‰é’®, **ç›´æ¥å±•å¼€æ­£æ–‡å†…å®¹**
- ä»æ–‡ä¸­æå–åŸæ–‡é“¾æ¥(å¦‚æœä½œè€…å†™äº†ä¼šåœ¨é¡¶éƒ¨ `info-box` é‡Œ **æ˜¾ç¤ºè½¬è½½è‡ª**) å¯è®¾ç½®æ˜¯å¦æ˜¾ç¤º
- å¢å¼ºå¹¿å‘Šå±è”½ï¼Œå»ºè®®ä½¿ç”¨ ABP ç­‰æ’ä»¶å±è”½å¹¿å‘Šï¼Œè¿˜å¯ä»¥æ˜æ˜¾æå‡é¡µé¢åŠ è½½é€Ÿåº¦
- **å±è”½ç™»å½•å¼¹çª—**
- å¢åŠ  **éšæœºèƒŒæ™¯å›¾** å¹¶è®¾ç½®é€æ˜åº¦
- **è§£é™¤è·³è½¬æ‹¦æˆª**, ç›´æ¥è·³è½¬åˆ°ç›®æ ‡é“¾æ¥
- é»˜è®¤æ˜¾ç¤ºè¯„è®ºåˆ—è¡¨åˆ†é¡µç»„ä»¶
- å¯ä»¥è§£é™¤å›ºå®šåœ¨å±å¹•åº•éƒ¨çš„ `toolbox`
- **å¯è®¾ç½®çº¯è‰²èƒŒæ™¯**
- æ˜¾ç¤ºæ–‡ç« ç›®å½•
- æ–‡ä¸­ä»£ç å— **è§£é™¤ç¦ç”¨å¤åˆ¶**

## â¤ï¸ è´¡çŒ®
> æœ¬é¡¹ç›®æ˜¯å¯¹äº [æ—§çš„è„šæœ¬](./src/csdn_rewrite.js) çš„é‡æ„ç‰ˆæœ¬, ç›¸æ¯”äºæ—§è„šæœ¬, æ–°é¡¹ç›®åŸºäº [vite-plugin-monkey](https://github.com/lisonge/vite-plugin-monkey) å®ç°äº†:
> - å¼€å‘ç¯å¢ƒçš„çƒ­æ›´æ–°
> - `TypeScript` åŠ `Vue` çš„æ”¯æŒ
> - æ¸…æ™°çš„ç›®å½•ç»“æ„
> - é¡¹ç›®å·¥ç¨‹åŒ–
> - åŸºäº [Application](#åº”ç”¨) å’Œ [Plugin](#æ’ä»¶) å¢å¼ºäº†ä»£ç çš„å¯ç»´æŠ¤æ€§å’Œæ‰©å±•èƒ½åŠ›

```bash
# å®‰è£…ä¾èµ–
pnpm install

# å¼€å‘
pnpm run dev # æˆ– npm run dev

# æ‰“åŒ…
pnpm run build
```

### ç›®å½•ç»“æ„
```bash
src/
â”œâ”€â”€ App.vue                           ------- å…¥å£ç»„ä»¶
â”œâ”€â”€ Application.ts                    ------- åº”ç”¨ç±», è¯¦è§ ğŸ“š åº”ç”¨ ç« èŠ‚
â”œâ”€â”€ assets
â”‚   â”œâ”€â”€ vite.svg
â”‚   â””â”€â”€ vue.svg
â”œâ”€â”€ components                        ------- æ‰€æœ‰çš„ç»„ä»¶
â”‚   â”œâ”€â”€ SettingsButton.vue            ------- ğŸ“š é¡µé¢å³ä¸‹è§’çš„è®¾ç½®æŒ‰é’®ç»„ä»¶
â”‚   â””â”€â”€ SettingsDialog.vue            ------- ğŸ“š è®¾ç½®å¼¹çª—ç»„ä»¶
â”œâ”€â”€ csdn_rewrite.js                   ------- é‡æ„å‰åŸå§‹å•æ–‡ä»¶çš„æ—§è„šæœ¬
â”œâ”€â”€ global.d.ts                       ------- å£°æ˜æŒ‚è½½åˆ° window ä¸Šçš„å…¨å±€å˜é‡
â”œâ”€â”€ main.ts                           ------- è„šæœ¬çš„å…¥å£æ–‡ä»¶
â”œâ”€â”€ plugins                           ------- æ’ä»¶ç›®å½•, è¯¦è§ ğŸ“š æ’ä»¶ ç« èŠ‚
â”‚   â”œâ”€â”€ CSDN.ts                       ------- ğŸ”Œ ç”¨äºåŠ«æŒæˆ–ä¿®æ”¹ `window.csdn` å˜é‡
â”‚   â”œâ”€â”€ Catalogue.ts                  ------- ğŸ”Œ ç”¨äºç¾åŒ–ç›®å½•å…ƒç´ 
â”‚   â”œâ”€â”€ Config.ts                     ------- ğŸ”Œ ç”¨äºå¤„ç†è„šæœ¬è®¾ç½®ä¸­çš„æ•°æ®
â”‚   â”œâ”€â”€ Intercept.ts                  ------- ğŸ”Œ ç”¨äºå‘é¡µé¢å†…æ³¨å…¥ `<script>` å½¢å¼çš„ `js` ä»£ç 
â”‚   â””â”€â”€ Style.ts                      ------- ğŸ”Œ ç”¨äºå¤„ç†æ‰€æœ‰çš„ `css` æ ·å¼
â”œâ”€â”€ style.scss                        ------- æ ·å¼æ–‡ä»¶, ä¼šæ³¨å…¥åˆ°é¡µé¢ä¸­, ç”¨äºä¿®æ”¹åŸæœ‰æ ·å¼
â”œâ”€â”€ utils                             ------- ç‹¬ç«‹äºæ’ä»¶çš„åŠŸèƒ½æ¨¡å—
â”‚   â”œâ”€â”€ AppStorage.ts                 ------- ç”¨äºå¤„ç†éœ€è¦ä¿å­˜åˆ°æµè§ˆå™¨ä¸­çš„æ•°æ®
â”‚   â”œâ”€â”€ BackgroundImage.ts            ------- ç”¨äºå¤„ç†é¡µé¢èƒŒæ™¯
â”‚   â””â”€â”€ Toolkit.ts                    ------- å…¶ä»–å…¨å±€æ–¹æ³•
â””â”€â”€ vite-env.d.ts
```

é¡¹ç›®å¯¹äºå„ä¸ªåŠŸèƒ½æ¨¡å—åšäº†å¾ˆç»†è‡´çš„åˆ’åˆ†, å¯¹äºå¼€å‘è€…æ¥è¯´:

- å¦‚æœè¦ **ä¿®æ”¹é¡µé¢æ ·å¼**:
  - åº”è¯¥åªä¿®æ”¹ [src/style.scss](./src/style.scss) æ–‡ä»¶
  - å¦‚æœæ¶‰åŠ `css` å˜é‡, åº”è¯¥ä¿®æ”¹ [StyleVars - src/plugins/Styles.ts](./src/plugins/Style.ts)
- å¦‚æœè¦ä¿®æ”¹æ’å…¥åˆ°é¡µé¢ä¸­çš„ **ç»„ä»¶**(ä¾‹å¦‚ *è®¾ç½®æŒ‰é’®* / *è®¾ç½®å¼¹çª—*):
  - åº”è¯¥ä¿®æ”¹ [src/components/](src/components/) ä¸‹çš„ç»„ä»¶
- å¦‚æœéœ€è¦ **ä½¿ç”¨ `javascript`** å®ç°ä¸€äº›åŠŸèƒ½:
  - é¦–å…ˆæŸ¥çœ‹ [src/plugins](./src/plugins/) ç›®å½•ä¸‹æ˜¯å¦æœ‰ç›¸å…³çš„ `plugin`, å¦‚æœæœ‰å°±åº”è¯¥å†™åˆ°å¯¹åº”çš„ `plugin` ç±»ä¸­
  - å¦‚æœæ²¡æœ‰ç›¸å…³ `plugin`, åº”è¯¥åˆ›å»ºæ–°çš„ `plugin` æ–‡ä»¶

### åº”ç”¨
> æºç ä½äº `src/Application.ts`

åº”ç”¨æ˜¯ [Application](./src/Application.ts) ç±»çš„å®ä¾‹, ç”¨äºç»„ç»‡å’Œç®¡ç†æ‰€æœ‰çš„ [Plugin](#æ’ä»¶)

[src/main.ts](./src/main.ts):

```typescript
// æ³¨å†Œ plugins
Application
  .use(Config)
  .use(Style)
  .use(CSDN)
  .use(Intercept)
  .use(Catalogue)
```

å¯¹äºæ¯ä¸ª `plugin`, éƒ½åº”è¯¥å…ˆè°ƒç”¨ `Application.use()` è¿›è¡Œæ³¨å†Œ, *å¾ˆåƒ `Vue` æ³¨å†Œç»„ä»¶çš„æ–¹å¼*

### æ’ä»¶
æ’ä»¶æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„åŠŸèƒ½æ¨¡å—, ä¸“æ³¨äºå®ç°æŸä¸ªåŠŸèƒ½

### Hooks
`Hooks` æ˜¯åœ¨ `Application` ä¸Šå®ç°çš„ä¸€å±‚æŠ½è±¡, *ç”¨äºå®ç°ç±»ä¼¼äº `Vue` çš„ç”Ÿå‘½å‘¨æœŸçš„åŠŸèƒ½*

## CHANGELOGS

[CHANGELOGS.md](./CHANGELOGS.md)
